<!doctype html><html lang=en><head><title>Suspicious Patch Lines · Learn, Converse, Share
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="JM (Jason Meridth)"><meta name=description content="DISCLAIMER: This is only relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.

  The Problem
  
    
    Link to heading
  

While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:"><meta name=keywords content="jason meridth,meridth,jm,software developer"><meta name=fediverse:creator content><meta name=twitter:card content="summary"><meta name=twitter:title content="Suspicious Patch Lines"><meta name=twitter:description content="DISCLAIMER: This is only relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.
The Problem Link to heading While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:"><meta property="og:url" content="http://jmeridth.com/posts/suspicious-patch-lines/"><meta property="og:site_name" content="Learn, Converse, Share"><meta property="og:title" content="Suspicious Patch Lines"><meta property="og:description" content="DISCLAIMER: This is only relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.
The Problem Link to heading While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-02-27T19:21:00-06:00"><meta property="article:modified_time" content="2010-02-27T19:21:00-06:00"><meta property="article:tag" content="Git"><link rel=canonical href=http://jmeridth.com/posts/suspicious-patch-lines/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.07092c1350ffd254998dc43a44ae96e617d14af4df4602626878df89189c5e1a.css integrity="sha256-BwksE1D/0lSZjcQ6RK6W5hfRSvTfRgJiaHjfiRicXho=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/css_dark_mode_gist_embed_code.min.5f4f026828cc544c1497785bca628b4ddc8a6c1f154cc2b83c87a13ceaff419a.css integrity="sha256-X08CaCjMVEwUl3hbymKLTdyKbB8VTMK4PIehPOr/QZo=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-dark"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=http://jmeridth.com/>Learn, Converse, Share
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=https://github.com/jmeridth/presentations/blob/main/README.md>Talks</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact Me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=http://jmeridth.com/posts/suspicious-patch-lines/>Suspicious Patch Lines</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2010-02-27T19:21:00-06:00>February 27, 2010
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
2-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/git/>Git</a></span></div></div></header><div class=post-content><p>DISCLAIMER: This is <em>only</em> relevant if you or someone contributing to your project are doing cross-platform development. If you are typically just developing on Windows, you should be able to keep the config options set to false.</p><h2 id=the-problem>The Problem
<a class=heading-link href=#the-problem><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>While trying to commit changes to a file I have under source control with Git on a Windows box using cygwin, I received the following error:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>jmeridth@web1 /cygdrive/d/site
</span></span><span class=line><span class=cl>$ git commit -am <span class=s2>&#34;changed the README to show authors&#34;</span>
</span></span><span class=line><span class=cl>*
</span></span><span class=line><span class=cl>* You have some suspicious patch lines:
</span></span><span class=line><span class=cl>*
</span></span><span class=line><span class=cl>* In README
</span></span><span class=line><span class=cl>* trailing whitespace <span class=o>(</span>line 26<span class=o>)</span>
</span></span><span class=line><span class=cl>README:26:
</span></span></code></pre></div><p>This type of error has been discussed quite a bit amongst .NET developers who are transitioning to Git. It has to due with the difference in handling of newlines between Windows and the Mac/*nix world. There are five solutions to this:</p><ol><li>Run the following from inside the repository: (the one I usually use, due to my cross-platform development)</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git config core.autocrlf <span class=nb>true</span>
</span></span><span class=line><span class=cl>git confit core.safecrlf <span class=nb>true</span>
</span></span></code></pre></div><p>The <a href=http://help.github.com/dealing-with-lineendings/ class=external-link target=_blank rel=noopener>Github Help Pages</a> provide an excellent explanation about this. Also read the <a href=http://www.kernel.org/pub/software/scm/git-core/docs/git-config.html class=external-link target=_blank rel=noopener>direct documentation from git-core</a>. This makes Git convert CRLF at the end of lines in the text files to LF when reading from the filesystem, and convert in reverse when writing to the filesystem. Just be aware also that if you do set this and one of your stored binary files is accidentally marked as text, there is a chance for it to become corrupted.</p><ol start=2><li>Edit the .git/hooks/pre-commit file and comment out the following lines:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=o>(</span>/s$/<span class=o>){</span>
</span></span><span class=line><span class=cl>  bad_line<span class=o>(</span><span class=s2>&#34;trailing whitespace&#34;</span>, <span class=nv>$_</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>The reason why this is a problem is because there is a space (s in posix regex) just before the end of the line (aka a trailing whitespace). Normally this file wouldn’t fire off unless you made it executable, but on Windows all of the git hooks run because there is no concept of whether they are executable or not, they all are by default. On Mac/*nix Git repositories, you need to “chmod +x” (change to executable) the git hook files before Git will run them.</p><ol start=3><li>When commiting do the following:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git commit --no-verify
</span></span></code></pre></div><p>and the pre-commit hook will be ignored.</p><ol start=4><li>Rename/Move/Delete the .git/hooks/pre-commit file</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mv .git/hooks/pre-commit .git/hooks/pre-commit.stop_working
</span></span></code></pre></div><ol start=5><li>Change the permissions on the .git/hooks/pre-commit file. In this case, I’m clearing the executable bit for all users (owner, group and rest of the world)</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chmod a-x .git/hooks/pre-commit
</span></span></code></pre></div></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2007 -
2024
JM (Jason Meridth)
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4W46VMK7DQ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4W46VMK7DQ")</script></body></html>