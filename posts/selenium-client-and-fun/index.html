<!doctype html><html lang=en><head><title>Selenium-client and fun · Learn, Converse, Share</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Jason Meridth"><meta name=description content="So I&rsquo;ve had the pleasure of working with selenium-client, the official Ruby client API for Selenium Remote Control (bare bone client driver). Assumptions: 1. You have Ruby 1.8+ installed 2. You have rubygems installed I&rsquo;m going to use the Slicehost Manage website to drive with my selenium tests. No babble, just instructions.
1.
sudo gem install selenium-client
2. download the selenium remote control (version 1.0 beta at the time of this entry). Remember where you install this because you will be reference the selenium-server.jar inside it."><meta name=keywords content="jason meridth,meridth,jm,software developer"><meta name=fediverse:creator content><meta name=twitter:card content="summary"><meta name=twitter:title content="Selenium-client and fun"><meta name=twitter:description content="So I’ve had the pleasure of working with selenium-client, the official Ruby client API for Selenium Remote Control (bare bone client driver). Assumptions: 1. You have Ruby 1.8+ installed 2. You have rubygems installed I’m going to use the Slicehost Manage website to drive with my selenium tests. No babble, just instructions.
1.
sudo gem install selenium-client 2. download the selenium remote control (version 1.0 beta at the time of this entry). Remember where you install this because you will be reference the selenium-server.jar inside it."><meta property="og:url" content="http://jmeridth.com/posts/selenium-client-and-fun/"><meta property="og:site_name" content="Learn, Converse, Share"><meta property="og:title" content="Selenium-client and fun"><meta property="og:description" content="So I’ve had the pleasure of working with selenium-client, the official Ruby client API for Selenium Remote Control (bare bone client driver). Assumptions: 1. You have Ruby 1.8+ installed 2. You have rubygems installed I’m going to use the Slicehost Manage website to drive with my selenium tests. No babble, just instructions.
1.
sudo gem install selenium-client 2. download the selenium remote control (version 1.0 beta at the time of this entry). Remember where you install this because you will be reference the selenium-server.jar inside it."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-02-12T04:35:00-06:00"><meta property="article:modified_time" content="2009-02-12T04:35:00-06:00"><meta property="article:tag" content="Selenium"><meta property="article:tag" content="Ruby"><meta property="article:tag" content="Testing"><link rel=canonical href=http://jmeridth.com/posts/selenium-client-and-fun/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.26a83dcefaf34339737bf29f77b17753bab5e60782b1ca9ba200abbb73b48cb0.css integrity="sha256-Jqg9zvrzQzlze/Kfd7F3U7q15geCscqbogCru3O0jLA=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/css_dark_mode_gist_embed_code.min.5f4f026828cc544c1497785bca628b4ddc8a6c1f154cc2b83c87a13ceaff419a.css integrity="sha256-X08CaCjMVEwUl3hbymKLTdyKbB8VTMK4PIehPOr/QZo=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/favicon.ico sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-dark"><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=http://jmeridth.com/>Learn, Converse, Share
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/projects/>Projects</a></li><li class=navigation-item><a class=navigation-link href=/talks/>Talks</a></li><li class=navigation-item><a class=navigation-link href=/contact/>Contact Me</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=http://jmeridth.com/posts/selenium-client-and-fun/>Selenium-client and fun</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2009-02-12T04:35:00-06:00>February 12, 2009
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=tags><i class="fa-solid fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/selenium/>Selenium</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/ruby/>Ruby</a>
</span><span class=separator>•</span>
<span class=tag><a href=/tags/testing/>Testing</a></span></div></div></header><div class=post-content><p>So I&rsquo;ve had the pleasure of working with <a href=http://github.com/ph7/selenium-client/tree/master class=external-link target=_blank rel=noopener>selenium-client</a>, the official Ruby client API for Selenium Remote Control (bare bone client driver). Assumptions: 1. You have Ruby 1.8+ installed 2. You have rubygems installed I&rsquo;m going to use the Slicehost Manage website to drive with my selenium tests. No babble, just instructions.</p><p>1.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo gem install selenium-client
</span></span></code></pre></div><p>2. download the <a href=http://release.seleniumhq.org/selenium-remote-control/1.0-beta-2/selenium-remote-control-1.0-beta-2-dist.zip class=external-link target=_blank rel=noopener>selenium remote control</a> (version 1.0 beta at the time of this entry). Remember where you install this because you will be reference the selenium-server.jar inside it.</p><p>3. update your .bashrc (usually on Ubuntu) or .bash_profile (what I have on my Mac) with a alias to start the selenium server (for me I have unzipped the download into a ~/code/seleniumrc folder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># commands</span>
</span></span><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>selsrvr</span><span class=o>=</span><span class=s2>&#34;java -jar ~/code/seleniumrc/selenium-server-1.0-beta-2/selenium-server.jar&#34;</span>
</span></span></code></pre></div><p>after you add that, re-source your bash file. For me on my Mac</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. ~/.bash_profile
</span></span></code></pre></div><p>For me on my Ubuntu box:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>. ~/.bashrc
</span></span></code></pre></div><p>4. Create a test file, test.rb somewhere (for me ~/code/seleniumrc/test.rb):</p><p>5. Write a test that:</p><ol><li><p>Logs in</p></li><li><p>Creates a slice</p></li><li><p>Captures the new root password</p></li><li><p>Captures the new IP Address</p></li><li><p>SSHs onto the new slice</p></li><li><p>Adds a file, and lists out the content of ~ (aka /home/root)</p></li><li><p>Deletes the slice</p></li><li><p>Logs out</p></li><li></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=nb>require</span> <span class=s2>&#34;test/unit&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s2>&#34;rubygems&#34;</span>
</span></span><span class=line><span class=cl><span class=n>gem</span> <span class=s2>&#34;selenium-client&#34;</span><span class=p>,</span> <span class=s2>&#34;&gt;=1.2.9&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s2>&#34;selenium/client&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s2>&#34;net/ssh&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NewTest</span> <span class=o>&lt;</span> <span class=no>Test</span><span class=o>::</span><span class=no>Unit</span><span class=o>::</span><span class=no>TestCase</span>
</span></span><span class=line><span class=cl>  <span class=kp>attr_reader</span> <span class=ss>:browser</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>setup</span>
</span></span><span class=line><span class=cl>    <span class=vi>@slice_name</span> <span class=o>=</span> <span class=s2>&#34;slice3&#34;</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span> <span class=o>=</span> <span class=no>Selenium</span><span class=o>::</span><span class=no>Client</span><span class=o>::</span><span class=no>Driver</span><span class=o>.</span><span class=n>new</span> <span class=s2>&#34;localhost&#34;</span><span class=p>,</span> <span class=mi>4444</span><span class=p>,</span> <span class=s2>&#34;*firefox&#34;</span><span class=p>,</span> <span class=s2>&#34;https://manage.slicehost.com/&#34;</span><span class=p>,</span> <span class=mi>10000</span>
</span></span><span class=line><span class=cl>    <span class=n>browser</span><span class=o>.</span><span class=n>start_new_browser_session</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>teardown</span>
</span></span><span class=line><span class=cl>    <span class=n>browser</span><span class=o>.</span><span class=n>close_current_browser_session</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>test_should_be_able_to_ssh_onto_new_slice_and_add_new_file</span>
</span></span><span class=line><span class=cl>    <span class=n>login</span>
</span></span><span class=line><span class=cl>    <span class=k>begin</span>
</span></span><span class=line><span class=cl>        <span class=n>create_slice</span><span class=p>(</span><span class=vi>@slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>root_password</span> <span class=o>=</span> <span class=vi>@browser</span><span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=s2>&#34;id=flash&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>sub</span><span class=p>(</span><span class=sr>/You will receive an email upon completion. The new root password will be: /</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>ip_address</span> <span class=o>=</span> <span class=vi>@browser</span>
</span></span><span class=line><span class=cl>          <span class=o>.</span><span class=n>get_text</span><span class=p>(</span><span class=s2>&#34;xpath=/html/body/div[@id=&#39;container&#39;]/div[@id=&#39;main&#39;]/div[1]/div[@id=&#39;slice_action&#39;]/div[@id=&#39;show_slice&#39;]/table/tbody/tr[4]/td[2]&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=o>.</span><span class=n>scan</span><span class=p>(</span><span class=sr>/d{0,3}.d{0,3}.d{0,3}.d{0,3}/</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span> <span class=o>!</span><span class=mi>180</span><span class=o>.</span><span class=n>times</span><span class=p>{</span> <span class=k>break</span> <span class=k>if</span> <span class=p>(</span><span class=vi>@browser</span><span class=o>.</span><span class=n>is_text_present</span><span class=p>(</span><span class=s2>&#34;active&#34;</span><span class=p>)</span> <span class=k>rescue</span> <span class=kp>false</span><span class=p>);</span> <span class=nb>sleep</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=no>Net</span><span class=o>::</span><span class=no>SSH</span><span class=o>.</span><span class=n>start</span><span class=p>(</span><span class=n>ip_address</span><span class=o>[</span><span class=mi>0</span><span class=o>].</span><span class=n>to_s</span><span class=p>,</span> <span class=s1>&#39;root&#39;</span><span class=p>,</span> <span class=ss>:password</span> <span class=o>=&gt;</span> <span class=n>root_password</span><span class=p>)</span> <span class=k>do</span> <span class=o>|</span><span class=n>ssh</span><span class=o>|</span>
</span></span><span class=line><span class=cl>            <span class=n>ssh</span><span class=o>.</span><span class=n>exec</span><span class=p>(</span><span class=s2>&#34;rm selenium_test_file.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>ssh</span><span class=o>.</span><span class=n>exec</span><span class=p>(</span><span class=s2>&#34;touch selenium_test_file.txt&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>stdout</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>ssh</span><span class=o>.</span><span class=n>exec!</span><span class=p>(</span><span class=s2>&#34;ls -lah ~&#34;</span><span class=p>)</span> <span class=k>do</span> <span class=o>|</span><span class=n>channel</span><span class=p>,</span> <span class=n>stream</span><span class=p>,</span> <span class=n>data</span><span class=o>|</span>
</span></span><span class=line><span class=cl>              <span class=n>stdout</span> <span class=o>&lt;&lt;</span> <span class=n>data</span> <span class=k>if</span> <span class=n>stream</span> <span class=o>==</span> <span class=ss>:stdout</span>
</span></span><span class=line><span class=cl>            <span class=k>end</span>
</span></span><span class=line><span class=cl>            <span class=nb>puts</span> <span class=n>stdout</span>
</span></span><span class=line><span class=cl>        <span class=k>end</span>
</span></span><span class=line><span class=cl>        <span class=n>go_to_slice</span><span class=p>(</span><span class=vi>@slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>ensure</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span> <span class=o>!</span><span class=mi>180</span><span class=o>.</span><span class=n>times</span><span class=p>{</span> <span class=k>break</span> <span class=k>if</span> <span class=p>(</span><span class=vi>@browser</span><span class=o>.</span><span class=n>is_text_present</span><span class=p>(</span><span class=s2>&#34;active&#34;</span><span class=p>)</span> <span class=k>rescue</span> <span class=kp>false</span><span class=p>);</span> <span class=nb>sleep</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>delete_slice</span><span class=p>(</span><span class=vi>@slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>end</span>
</span></span><span class=line><span class=cl>    <span class=n>logout</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>test_should_be_able_to_delete_an_existing_slice</span>
</span></span><span class=line><span class=cl>    <span class=n>login</span>
</span></span><span class=line><span class=cl>    <span class=n>go_to_slice</span><span class=p>(</span><span class=vi>@slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>delete_slice</span><span class=p>(</span><span class=vi>@slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>logout</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>login</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>open</span> <span class=s2>&#34;/login&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>assert_equal</span> <span class=s2>&#34;Slicehost Login&#34;</span><span class=p>,</span> <span class=n>browser</span><span class=o>.</span><span class=n>title</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>type</span> <span class=s2>&#34;email&#34;</span><span class=p>,</span> <span class=s2>&#34;youemail@domain.com&#34;</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>type</span> <span class=s2>&#34;password&#34;</span><span class=p>,</span> <span class=s2>&#34;yourpassword&#34;</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;commit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>create_slice</span><span class=p>(</span><span class=n>slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=Add a Slice&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>type</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span> <span class=n>slice_name</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;commit&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>go_to_slice</span><span class=p>(</span><span class=n>slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=My Slices&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=</span><span class=si>#{</span><span class=n>slice_name</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>delete_slice</span><span class=p>(</span><span class=n>slice_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=Delete&#34;</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=Delete </span><span class=si>#{</span><span class=n>slice_name</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>assert</span> <span class=sr>/^Permanently delete this Slice and all of its data[sS] There is no turning back!$/</span> <span class=o>=~</span> <span class=vi>@browser</span><span class=o>.</span><span class=n>get_confirmation</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>logout</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>click</span> <span class=s2>&#34;link=Logout&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>browser_wait</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>browser_wait</span>
</span></span><span class=line><span class=cl>    <span class=vi>@browser</span><span class=o>.</span><span class=n>wait_for_page_to_load</span> <span class=s2>&#34;30000&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>end</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></div><p>7. Start the selenium server:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>selsrvr
</span></span></code></pre></div><p>8. run the test:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ruby ~/code/seleniumrc/test.rb
</span></span></code></pre></div><p>You should see the firefox browser open up in two windows and see the automation in process. Once the slice is created, I&rsquo;ve setup a timer at 180 seconds (3 min) to wait for the slice to be created and set to a status of active. Like #5 above states, once complete the test captures the root password and ip address off the web UI and uses them to SSH into the new slice. This is my 3rd time using selenium and I like what I see. More to come.</p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2007 -
2026
Jason Meridth
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4W46VMK7DQ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4W46VMK7DQ")</script></body></html>