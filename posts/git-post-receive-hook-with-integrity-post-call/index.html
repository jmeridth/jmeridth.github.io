<!doctype html><html lang=en><head><meta charset=utf-8><title>Git Post-receive hook with integrity post call | Jason Meridth</title><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.103.1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="jason meridth,meridth,jm,software developer"><meta name=description content="Using the following code:
This git post-receive hook script queries the latest commit, gets the revision changes, and then passes that payload (via json) …"><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link rel=stylesheet type=text/css media=screen href=/css/all.css><link rel=stylesheet href=/css/katex.css crossorigin=anonymous><script defer src=/js/katex.js integrity=sha384-HELAAZU8xvHgfT/8z4Mhmu+E2z3oBrMEuywaMh/CEd5uTZIDSct7TEaX+S43+dOi crossorigin=anonymous></script>
<script defer src=/js/auto-render.js integrity=sha384-0QrOZ8WIARJUoT5pH7Iuzi7iq0mXUXLF9yj5ZvYxTkMRv1zcaPQiOQ9ksHYbKw7M crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:title" content="Git Post-receive hook with integrity post call"><meta property="og:description" content="Using the following code:
This git post-receive hook script queries the latest commit, gets the revision changes, and then passes that payload (via json) to a net/https POST call. I setup our Integrity CI server with a self-signed certificate and HTTP basic authentication.
The Net::HTTP::Post.new instantiation group handles populating the basic authentication information and putting the payload into the form data of the request. The Net::HTTP.new group handles telling the request that it will be via SSL (443) and to not verify the SSL certificate (since I&rsquo;m using a self-signed certificate; otherwise, I&rsquo;d get a warning and kill my automation process)"><meta property="og:type" content="article"><meta property="og:url" content="http://blog.jasonmeridth.com/posts/git-post-receive-hook-with-integrity-post-call/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-07-17T05:01:00-05:00"><meta property="article:modified_time" content="2009-07-17T05:01:00-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Post-receive hook with integrity post call"><meta name=twitter:description content="Using the following code:
This git post-receive hook script queries the latest commit, gets the revision changes, and then passes that payload (via json) to a net/https POST call. I setup our Integrity CI server with a self-signed certificate and HTTP basic authentication.
The Net::HTTP::Post.new instantiation group handles populating the basic authentication information and putting the payload into the form data of the request. The Net::HTTP.new group handles telling the request that it will be via SSL (443) and to not verify the SSL certificate (since I&rsquo;m using a self-signed certificate; otherwise, I&rsquo;d get a warning and kill my automation process)"><meta itemprop=name content="Git Post-receive hook with integrity post call"><meta itemprop=description content="Using the following code:
This git post-receive hook script queries the latest commit, gets the revision changes, and then passes that payload (via json) to a net/https POST call. I setup our Integrity CI server with a self-signed certificate and HTTP basic authentication.
The Net::HTTP::Post.new instantiation group handles populating the basic authentication information and putting the payload into the form data of the request. The Net::HTTP.new group handles telling the request that it will be via SSL (443) and to not verify the SSL certificate (since I&rsquo;m using a self-signed certificate; otherwise, I&rsquo;d get a warning and kill my automation process)"><meta itemprop=datePublished content="2009-07-17T05:01:00-05:00"><meta itemprop=dateModified content="2009-07-17T05:01:00-05:00"><meta itemprop=wordCount content="275"><meta itemprop=keywords content></head><body><header><div id=avatar><a href=http://blog.jasonmeridth.com/><img src=/img/avatar.jpg alt="Jason Meridth"></a></div><div id=titletext><h2 id=title><a href=http://blog.jasonmeridth.com/>Jason Meridth</a></h2></div><div id=title-description><p id=subtitle>Learn, Converse, Share</p><div id=social><nav><ul><li><a href=https://github.com/jmeridth><i title=Github class="icons fab fa-github"></i></a></li><li><a href=mailto:jmeridth@gmail.com><i title=Email class="icons fas fa-envelope"></i></a></li><li><a href=https://linkedin.com/in/jmeridth><i title=LinkedIn class="icons fab fa-linkedin"></i></a></li><li><a href=/index.xml><i title=RSS class="icons fas fa-rss"></i></a></li><li><a><i title="Switch Dark Mode" class="dark-mode icons fas fa-moon"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All Posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li><li><a href=/categories>Categories</a></li></ul></nav></div></header><main><div class=post><article><div class=post-header><div class=meta><div class=date><span class=day>17</span>
<span class=rest>Jul 2009</span></div></div><div class=matter><h1 class=title>Git Post-receive hook with integrity post call</h1><p class=post-meta><span class=post-meta>&nbsp;<i class="fas fa-clock"></i>&nbsp;2&nbsp;minutes
&nbsp;| &nbsp;
<i class="fas fa-book"></i>&nbsp;275&nbsp;words</span></p></div></div><div class=markdown><p>Using the following code:</p><p>This git post-receive hook script queries the latest commit, gets the revision changes, and then passes that payload (via json) to a net/https POST call. I setup our <a href=http://www.integrityapp.com/ target=_blank>Integrity CI server</a> with a self-signed certificate and HTTP basic authentication.</p><p>The Net::HTTP::Post.new instantiation group handles populating the basic authentication information and putting the payload into the form data of the request. The Net::HTTP.new group handles telling the request that it will be via SSL (443) and to not verify the SSL certificate (since I&rsquo;m using a self-signed certificate; otherwise, I&rsquo;d get a warning and kill my automation process)</p><p>The other important part is the &ldquo;if pid = fork&rdquo;. The ruby <a href=http://www.ruby-doc.org/core/classes/Process.html#M003179 target=_blank>fork</a> command allows code to happen in the background, in the case the POST call, and therefore make the call synchronous. Otherwise, when the developers commit their code to the repository, they will have to wait for the build to finish before their prompt will be returned to them. fork will return zero (0) if it fails to create the background process.</p><p>I&rsquo;m still checking whether the zombie process warning in the rdoc (for the fork command) is a problem. I&rsquo;ll update this if it is.</p><p>The last line is notification for the user so they know what&rsquo;s going on. Always good to keep the user in the loop. :)</p><h2 id=comments>Comments</h2><p><strong><a href=#446 title="2009-07-22 05:25:21">not-impossible</a>:</strong> The code doesn&rsquo;t show up in the Google reader. Any idea why? do you use some funny code highlighting? Cheers</p><p><strong><a href=#447 title="2009-07-22 16:05:56">Jason Meridth</a>:</strong> @not-impossible Unfortunately RSS feeds won&rsquo;t allow nested code that lies in a script tag and that is what gist.github.com uses. I may have to go back to dp.syntaxhighlighter.</p></div></div></article></div></main><footer>© Copyright notice | <a href=https://github.com/dataCobra/hugo-vitae target=_blank>Vitae</a> theme for <a href=https://gohugo.io target=_blank>Hugo</a>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-38456568-3","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></footer><script src=/js/dark-mode.js></script></body></html>