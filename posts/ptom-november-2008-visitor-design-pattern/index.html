<!doctype html><html lang=en><head><meta charset=UTF-8><title>PTOM - November 2008 - Visitor Design Pattern | JM (Jason Meridth)</title>
<meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo 0.125.5"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="jason meridth,meridth,jm,software developer"><meta name=description content='Definition Visitor Design Pattern - _"_Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new …'><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><link rel=stylesheet type=text/css media=screen href=/css/all.css><link rel=stylesheet href=/css/katex.css crossorigin=anonymous><script defer src=/js/katex.js integrity=sha384-HELAAZU8xvHgfT/8z4Mhmu+E2z3oBrMEuywaMh/CEd5uTZIDSct7TEaX+S43+dOi crossorigin=anonymous></script><script defer src=/js/auto-render.js integrity=sha384-0QrOZ8WIARJUoT5pH7Iuzi7iq0mXUXLF9yj5ZvYxTkMRv1zcaPQiOQ9ksHYbKw7M crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-4W46VMK7DQ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4W46VMK7DQ")</script><meta property="og:url" content="http://blog.jasonmeridth.com/posts/ptom-november-2008-visitor-design-pattern/"><meta property="og:site_name" content="JM (Jason Meridth)"><meta property="og:title" content="PTOM - November 2008 - Visitor Design Pattern"><meta property="og:description" content='Definition Visitor Design Pattern - _"_Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. " dofactory.com Another term you may hear when working with the Visitor Pattern, is Double Dispatch. How that applies to Visitor is that the accept method takes a visitor instance, which in turn has a visit method that takes the concrete instance (aka “this”).'><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2008-11-30T21:15:00-06:00"><meta property="article:modified_time" content="2022-05-20T11:25:54-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="PTOM - November 2008 - Visitor Design Pattern"><meta name=twitter:description content='Definition Visitor Design Pattern - _"_Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. " dofactory.com Another term you may hear when working with the Visitor Pattern, is Double Dispatch. How that applies to Visitor is that the accept method takes a visitor instance, which in turn has a visit method that takes the concrete instance (aka &ldquo;this&rdquo;).'><meta itemprop=name content="PTOM - November 2008 - Visitor Design Pattern"><meta itemprop=description content='Definition Visitor Design Pattern - _"_Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. " dofactory.com Another term you may hear when working with the Visitor Pattern, is Double Dispatch. How that applies to Visitor is that the accept method takes a visitor instance, which in turn has a visit method that takes the concrete instance (aka &ldquo;this&rdquo;).'><meta itemprop=datePublished content="2008-11-30T21:15:00-06:00"><meta itemprop=dateModified content="2022-05-20T11:25:54-05:00"><meta itemprop=wordCount content="457"></head><body><header><div id=avatar><a href=http://blog.jasonmeridth.com/><img src=/img/jmavatar.jpeg alt="JM (Jason Meridth)"></a></div><div id=titletext><h2 id=title><a href=http://blog.jasonmeridth.com/>JM (Jason Meridth)</a></h2></div><div id=title-description><p id=subtitle>Learn, Converse, Share</p><div id=social><nav><ul><li><a href=https://github.com/jmeridth><i title=Github class="icons fab fa-github"></i></a></li><li><a href=mailto:jmeridth@gmail.com><i title=Email class="icons fas fa-envelope"></i></a></li><li><a href=https://linkedin.com/in/jmeridth><i title=LinkedIn class="icons fab fa-linkedin"></i></a></li><li><a href=/index.xml><i title=RSS class="icons fas fa-rss"></i></a></li><li><a><i title="Switch Dark Mode" class="dark-mode icons fas fa-moon"></i></a></li></ul></nav></div></div><div id=mainmenu><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>All Posts</a></li><li><a href=/about>About</a></li><li><a href=/tags>Tags</a></li><li><a href=/categories>Categories</a></li></ul></nav></div></header><main><div class=post><article><div class=post-header><div class=meta><div class=date><span class=day>30</span>
<span class=rest>Nov 2008</span></div></div><div class=matter><h1 class=title>PTOM - November 2008 - Visitor Design Pattern</h1><p class=post-meta><span class=post-meta>&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;| &nbsp;
<i class="fas fa-book"></i>&nbsp;457&nbsp;words</span></p></div></div><div class=markdown><h2 id=definition>Definition</h2><p>Visitor Design Pattern - _"_Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. " <a href=http://dofactory.com/Patterns/PatternVisitor.aspx target=_blank>dofactory.com</a> Another term you may hear when working with the Visitor Pattern, is <a href=http://en.wikipedia.org/wiki/Double_dispatch target=_blank>Double Dispatch</a>. How that applies to Visitor is that the accept method takes a visitor instance, which in turn has a visit method that takes the concrete instance (aka &ldquo;this&rdquo;). Inside the visitor visit method is where the core of the visitor pattern occurs. It is where you can extend the concrete class without actually editing the concrete class. <em><figure><img src=//lostechies.com/jasonmeridth/files/2011/03/image_thumb.png alt=image></figure></em></p><h2 id=open-closed-principle-ocp>Open Closed Principle (OCP)</h2><p>&ldquo;&mldr;using the visitor pattern helps conformance with the open/closed principle.&rdquo; (<a href=http://en.wikipedia.org/wiki/Visitor_pattern target=_blank>Wikipedia</a>) The <a href=/blogs/joe_ocampo/archive/2008/03/21/ptom-the-open-closed-principle.aspx>Open/Closed Principle</a> is that &ldquo;a class is open for extension, closed for modification&rdquo;. (<a href=http://en.wikipedia.org/wiki/Open_Closed_Principle target=_blank>Thank you Mr. Meyer</a>) I recently used the Visitor pattern inline with usage of a State Pattern. The Visitor would be able to determine, based on it&rsquo;s algorithms, which was changing regularly by the needs of the end user, whether an object could move to the next state in the machine. Adhering to our theme, a coffee shop, I decided to generat a paycheck stub . My C# example is showing how to report the coffee shop employees earned wages, deductions via sick days and number of vacation days taken:</p><h2 id=c-code>C# Code</h2><p>Test Firsts (NUnit): <script src=https://gist.github.com/jmeridth/1067984.js></script>I have two test fixtures, one for hourly employees and one for full-time employees. Hopefully, via my rough version of Behavior Driven Development (BDD), you can read my tests without any problems. Implementation: <script src=https://gist.github.com/jmeridth/1067988.js></script>Please remember, this is &ldquo;blog friendly&rdquo; code. I would definitely break the visitor class apart into a few classes (i.e., WageCalculator, SickPayDeductionCalculator, etc).</p><h2 id=ruby-code>Ruby Code</h2><p>Please understand that I&rsquo;m a Ruby newbie and I&rsquo;m petty sure there is a more &ldquo;Ruby-ish&rdquo; way to do this.__I&rsquo;ve recently been placed on a Ruby team and I&rsquo;m making the transition from the static language mind-set to the dynamic language mind-set. I do understand with mix-ins you can dynamically add functionality to a class based on context, so visitor may not be necessary at all. I&rsquo;m still grokking that concept. I still believe in the Open/Closed principle, but it may be moot with dynamic languages. It&rsquo;s actually very exciting being a newbie developer again. It feeds my insatiable need to learn. Test (Using RSpec): <script src=https://gist.github.com/jmeridth/1067994.js></script>Implementation: <script src=https://gist.github.com/jmeridth/1067996.js></script></p><h2 id=what-i-learned>What I Learned</h2><p>I personally use the strategy pattern more than any other pattern. That is why I chose this pattern. So I could understand it better. A good example I saw recently, using lambdas and all the new .NET features was <a href=http://mokhan.ca/blog/CommentView,guid,0480cc5f-54e4-452f-b0d5-661f0a8289d7.aspx#commentstart target=_blank>Chad’s comment</a> (<a href=http://pastie.org/245770 target=_blank>pastie.org</a>) on <a href=http://mokhan.ca/blog/2008/08/01/Recursive+Command.aspx target=_blank>Mo’s Recursive Command Post</a> Hope this helps someone understand the Visitor Design Pattern better.</p></div></div></article></div></main><footer>© Copyright notice | <a href=https://github.com/dataCobra/hugo-vitae target=_blank>Vitae</a> theme for <a href=https://gohugo.io target=_blank>Hugo</a></footer><script src=/js/dark-mode.js></script></body></html>