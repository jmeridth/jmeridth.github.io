---
layout: post
title: Installing 2 CruiseControl services/web dashboards on 1 server/PC
date: 2007/10/02 21:45:03
---


Why? I am currently hosting CruiseControl for an open-source project and I don't want my personal projects to show up on their web dashboard.  I also want a complete separation.  That means theirs is running on its own port number and they have their own Virtual Directory (ccnet) on the Default website. The given CruiseControl.msi file does an excellent job of setting up the first CruiseControl service and virtual directory for you.  I won't go into this much, but you will learn a little bit about what it does because I'm installing my instance manually. 

## FILE STRUCTURE

1\. First (easiest way), copy the folder structure created by the msi install and copy it to another folder. ![image](jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb.png) copies to ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_1.png)

## SERVICE

1\. Next edit the following files and the specific lines in your new folder structure: ...CruiseControl.NET2/server/ ccnet.exe.config : Change the port to a new port (default was 21234) ccservice.exe.config : Change the port to a new port (default was 21234) (both files have the following schema) ![image](jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_2.png) 4\. Create your new CruiseControl.NET Server service Currently you should have the following in your services manager (Start-> Run: services.msc) (I'm a keyboard junkie, I use Start->Run for mostly everything) ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_3.png) Now if you run the following command in the command line you will create another service for your new CruiseControl.NET Server: ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_6.png) This is using the service command ([details here](http://msdn2.microsoft.com/en-us/library/ms810435.aspx)) to install the new service via command line. ***BEWARE:  You have to leave a space after the equals signs or you will get a usage notice (error).  Took me a while to figure that one out. Here is what you should see inside the properties dialog of the new service. ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_5.png) You should be able to right click the service and choose start.  If you receive an error, be sure to check the ccservice.exe.config file and that the port is different than your other service that is most likely already started.  This is a common error for not starting. ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_4.png)

## WEB DASHBOARD

1\. Edit the ...CruiseControl.NET2webdashboarddashboard.config file with the new port number: Change tcp://localhost:21234/CruiseManager.rem to tcp://localhost:<yourPort#>/CruiseManager.rem ![image](jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_7.png) 2\. Create a new virtual directory on your server/PC for your new dashboard: ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_8.png) Outside of the default settings created by creating a new Virtual Directory, be aware of the following: ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_10.png) Local path: C:Program FilesCruiseControl.NET2webdashboard Execure Permissions: Scripts only I also use a unique Application Pool for all my Virtual Directories and Sites. I created a CCNet App Pool for this and my other ccnet Virtual Directory. ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_11.png) Default Document: default.aspx ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_12.png) Make sure the site is using ASP.NET 2.0 This should be all you need. When you type: <http://localhost/ccnet2> ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_13.png) Just be aware that when you want to use the latest CCTray, you will need to include the port number if you are going to connect via remoting: ![image](http://lostechies.com/jasonmeridth/files/2011/03/Installing2CruiseControlserviceswebdashb_EB50/image_thumb_14.png) Connection for dashboard: <http://localhost/ccnet2> Connection for .NET remoting: localhost:43555 I haven't used the last one but for those out there that need to, you can connect to non-CruiseControl.NET build servers (CruiseControl for Java).   I know this is brute force and I'm open to all suggestions for a more elegant solution. I'm blogging this for memory and for anyone else who might need it.

## Comments

**[Jimmy Bogard](#137 "2007-10-03 12:32:07"):** I recently had to do this also, as we have different service accounts for each environment we deploy to. I had to create a different CC.NET service for each service account, but I kept just the one dashboard to monitor all of them. In that case, I just copied the "server" folder inside the CruiseControl.NET folder. But by creating separate dashboards, you can also apply separate IIS authentication and NTFS permissions to each set of CCNET servers it monitors, to give some level of security over who can set off builds.

