<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Nginx on Learn, Converse, Share</title><link>http://jmeridth.com/tags/nginx/</link><description>Recent content in Nginx on Learn, Converse, Share</description><generator>Hugo</generator><language>en</language><lastBuildDate>Thu, 12 Feb 2009 04:46:00 -0600</lastBuildDate><atom:link href="http://jmeridth.com/tags/nginx/index.xml" rel="self" type="application/rss+xml"/><item><title>Hudson and Nginx</title><link>http://jmeridth.com/posts/hudson-and-nginx/</link><pubDate>Thu, 12 Feb 2009 04:46:00 -0600</pubDate><guid>http://jmeridth.com/posts/hudson-and-nginx/</guid><description>&lt;p&gt;UPDATE: I left HTTP Auth in place via Nginx and removed security from my Hudson instance. This works for me because I don&amp;rsquo;t need the Hudson security. Every developer should be able to manage the CI server. I&amp;rsquo;m just trying to prevent external access to the dashboard.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been having fun trying to figure out how to block a user&amp;rsquo;s ability of going to &lt;a href="http://mydomain:8080" class="external-link" target="_blank" rel="noopener"&gt;http://mydomain:8080&lt;/a&gt; and bypassing my 80 to 443 redirect and htpasswd HTTP basic authentication. I even went as far as removing Nginx and installing Apache. According to the Hudson site, we can use &lt;a href="http://hudson.gotdns.com/wiki/display/HUDSON/Apache&amp;#43;frontend&amp;#43;for&amp;#43;security" class="external-link" target="_blank" rel="noopener"&gt;Apache to do this&lt;/a&gt;. Either I&amp;rsquo;m not smart enough or web pages like this reminded me why I hate the Java Enterprise stack as much as I do. Talk about installation obfuscation. My problem exists because the Tomcat instance running the hudson war file uses &lt;a href="http://tomcat.apache.org/tomcat-5.5-doc/config/ajp.html#Standard%20Implementation" class="external-link" target="_blank" rel="noopener"&gt;Apache JServe Protocol&lt;/a&gt; (AJP) and will allow direct access on whatever port you used (default 8080). This is even if you proxy_pass to 8080 from 443 (SSL) or 80 (Web). Through testing and research it seems that &lt;a href="http://www.ruby-forum.com/topic/157269#693042" class="external-link" target="_blank" rel="noopener"&gt;Nginx does not have a solution for this&lt;/a&gt;. I can&amp;rsquo;t allow access to my Hudson instance from external users. I have a self-signed certificate and a .htpasswd file to protect the instance, but is all useless is someone could just type in &lt;a href="http://mydomain.com:8080" class="external-link" target="_blank" rel="noopener"&gt;http://mydomain.com:8080&lt;/a&gt;. I want that redirected to &lt;a href="https://mydomain.com" class="external-link" target="_blank" rel="noopener"&gt;https://mydomain.com&lt;/a&gt; which will then proxy internally to &lt;a href="http://127.0.0.1:8080" class="external-link" target="_blank" rel="noopener"&gt;http://127.0.0.1:8080&lt;/a&gt;. I didn&amp;rsquo;t want to fight this, so I just used iptables (linux firewall) to block external requests on port 8080 but allow internal requests to 8080. Here is the entry in my iptables file:&lt;/p&gt;</description></item></channel></rss>